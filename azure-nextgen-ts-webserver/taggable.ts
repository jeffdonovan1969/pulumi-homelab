import * as pulumi from "@pulumi/pulumi";

/**
 * registerAutoTags registers a global stack transformation that merges a set
 * of tags with whatever was also explicitly added to the resource definition.
 */
export function tagAllResources(autoTags: Record<string, string>): void {
    pulumi.runtime.registerStackTransformation((args) => {
        if (isTaggable(args.type)) {
            // Merge current tags with provided tags
            args.props["tags"] = {
                Name: args.name, // set a tag, but allow overrides on the resource itself
                ...args.props["tags"],
                ...autoTags,
            };
            return { props: args.props, opts: args.opts };
        }
        return undefined;
    });
}

/**
 * isTaggable returns true if the given resource type is an AWS resource that supports tags.
 */
export function isTaggable(t: string): boolean {
    return (taggableResourceTypes.indexOf(t) !== -1);
}

// taggableResourceTypes is a list of known Azure Next Gen type tokens that are taggable.
const taggableResourceTypes = [
"azure-nextgen:agfoodplatform/latest:farmBeats",
"azure-nextgen:alertsmanagement/latest:actionRules",
"azure-nextgen:alertsmanagement/latest:smartDetectorAlertRules",
"azure-nextgen:analysisservices/latest:servers",
"azure-nextgen:apimanagement/latest:service",
"azure-nextgen:appconfiguration/latest:configurationStores",
"azure-nextgen:appplatform/latest:Spring",
"azure-nextgen:attestation/latest:attestationProviders",
"azure-nextgen:authorization/latest:resourceManagementPrivateLinks",
"azure-nextgen:automanage/latest:accounts",
"azure-nextgen:automanage/latest:configurationProfilePreferences",
"azure-nextgen:automation/latest:automationAccounts",
"azure-nextgen:automation/latest:automationAccounts/configurations",
"azure-nextgen:automation/latest:automationAccounts/runbooks",
"azure-nextgen:avs/latest:privateClouds",
"azure-nextgen:azureactivedirectory/latest:b2cDirectories",
"azure-nextgen:azureactivedirectory/latest:guestUsages",
"azure-nextgen:azuredata/latest:dataControllers",
"azure-nextgen:azuredata/latest:postgresInstances",
"azure-nextgen:azuredata/latest:sqlManagedInstances",
"azure-nextgen:azuredata/latest:sqlServerInstances",
"azure-nextgen:azuredata/latest:sqlServerRegistrations",
"azure-nextgen:azurestack/latest:edgeSubscriptions",
"azure-nextgen:azurestack/latest:linkedSubscriptions",
"azure-nextgen:azurestack/latest:registrations",
"azure-nextgen:azurestackhci/latest:clusters",
"azure-nextgen:batch/latest:batchAccounts",
"azure-nextgen:bingmaps/latest:mapApis",
"azure-nextgen:blockchain/latest:blockchainMembers",
"azure-nextgen:blockchain/latest:cordaMembers",
"azure-nextgen:blockchain/latest:watchers",
"azure-nextgen:blockchaintokens/latest:TokenServices",
"azure-nextgen:botservice/latest:botServices",
"azure-nextgen:cache/latest:Redis",
"azure-nextgen:cache/latest:redisEnterprise",
"azure-nextgen:cdn/latest:CdnWebApplicationFirewallPolicies",
"azure-nextgen:cdn/latest:profiles",
"azure-nextgen:cdn/latest:profiles/endpoints",
"azure-nextgen:certificateregistration/latest:certificateOrders",
"azure-nextgen:codespaces/latest:plans",
"azure-nextgen:cognitiveservices/latest:accounts",
"azure-nextgen:compute/latest:availabilitySets",
"azure-nextgen:compute/latest:cloudServices",
"azure-nextgen:compute/latest:diskAccesses",
"azure-nextgen:compute/latest:diskEncryptionSets",
"azure-nextgen:compute/latest:disks",
"azure-nextgen:compute/latest:galleries",
"azure-nextgen:compute/latest:hostGroups",
"azure-nextgen:compute/latest:hostGroups/hosts",
"azure-nextgen:compute/latest:images",
"azure-nextgen:compute/latest:proximityPlacementGroups",
"azure-nextgen:compute/latest:restorePointCollections",
"azure-nextgen:compute/latest:sharedVMExtensions",
"azure-nextgen:compute/latest:sharedVMImages",
"azure-nextgen:compute/latest:snapshots",
"azure-nextgen:compute/latest:sshPublicKeys",
"azure-nextgen:compute/latest:virtualMachines",
"azure-nextgen:compute/latest:virtualMachines/extensions",
"azure-nextgen:compute/latest:virtualMachines/runCommands",
"azure-nextgen:compute/latest:virtualMachineScaleSets",
"azure-nextgen:connectedcache/latest:CacheNodes",
"azure-nextgen:containerinstance/latest:containerGroups",
"azure-nextgen:containerregistry/latest:registries",
"azure-nextgen:containerregistry/latest:registries/agentPools",
"azure-nextgen:containerregistry/latest:registries/buildTasks",
"azure-nextgen:containerregistry/latest:registries/replications",
"azure-nextgen:containerregistry/latest:registries/tasks",
"azure-nextgen:containerregistry/latest:registries/webhooks",
"azure-nextgen:containerservice/latest:containerServices",
"azure-nextgen:containerservice/latest:managedClusters",
"azure-nextgen:containerservice/latest:openShiftManagedClusters",
"azure-nextgen:costmanagement/latest:Connectors",
"azure-nextgen:customproviders/latest:resourceProviders",
"azure-nextgen:d365customerinsights/latest:instances",
"azure-nextgen:databox/latest:jobs",
"azure-nextgen:databoxedge/latest:DataBoxEdgeDevices",
"azure-nextgen:databricks/latest:workspaces",
"azure-nextgen:datacatalog/latest:catalogs",
"azure-nextgen:datafactory/latest:dataFactories",
"azure-nextgen:datafactory/latest:factories",
"azure-nextgen:datalakeanalytics/latest:accounts",
"azure-nextgen:datalakestore/latest:accounts",
"azure-nextgen:dataprotection/latest:BackupVaults",
"azure-nextgen:dataprotection/latest:ResourceOperationGateKeepers",
"azure-nextgen:datashare/latest:accounts",
"azure-nextgen:dbformariadb/latest:servers",
"azure-nextgen:dbformysql/latest:flexibleServers",
"azure-nextgen:dbformysql/latest:servers",
"azure-nextgen:dbforpostgresql/latest:flexibleServers",
"azure-nextgen:dbforpostgresql/latest:serverGroups",
"azure-nextgen:dbforpostgresql/latest:servers",
"azure-nextgen:dbforpostgresql/latest:serversv2",
"azure-nextgen:deploymentmanager/latest:artifactSources",
"azure-nextgen:deploymentmanager/latest:rollouts",
"azure-nextgen:deploymentmanager/latest:serviceTopologies",
"azure-nextgen:deploymentmanager/latest:serviceTopologies/services",
"azure-nextgen:deploymentmanager/latest:serviceTopologies/services/serviceUnits",
"azure-nextgen:deploymentmanager/latest:steps",
"azure-nextgen:desktopvirtualization/latest:applicationgroups",
"azure-nextgen:desktopvirtualization/latest:hostpools",
"azure-nextgen:desktopvirtualization/latest:workspaces",
"azure-nextgen:devices/latest:ElasticPools",
"azure-nextgen:devices/latest:ElasticPools/IotHubTenants",
"azure-nextgen:devices/latest:IotHubs",
"azure-nextgen:devices/latest:ProvisioningServices",
"azure-nextgen:deviceupdate/latest:accounts",
"azure-nextgen:deviceupdate/latest:accounts/instances",
"azure-nextgen:devops/latest:pipelines",
"azure-nextgen:devspaces/latest:controllers",
"azure-nextgen:devtestlab/latest:labcenters",
"azure-nextgen:devtestlab/latest:labs",
"azure-nextgen:devtestlab/latest:labs/environments",
"azure-nextgen:devtestlab/latest:labs/serviceRunners",
"azure-nextgen:devtestlab/latest:labs/virtualMachines",
"azure-nextgen:devtestlab/latest:schedules",
"azure-nextgen:digitaltwins/latest:digitalTwinsInstances",
"azure-nextgen:documentdb/latest:databaseAccounts",
"azure-nextgen:domainregistration/latest:domains",
"azure-nextgen:enterpriseknowledgegraph/latest:services",
"azure-nextgen:eventgrid/latest:domains",
"azure-nextgen:eventgrid/latest:partnerNamespaces",
"azure-nextgen:eventgrid/latest:partnerRegistrations",
"azure-nextgen:eventgrid/latest:partnerTopics",
"azure-nextgen:eventgrid/latest:systemTopics",
"azure-nextgen:eventgrid/latest:topics",
"azure-nextgen:eventhub/latest:clusters",
"azure-nextgen:eventhub/latest:namespaces",
"azure-nextgen:experimentation/latest:experimentWorkspaces",
"azure-nextgen:falcon/latest:namespaces",
"azure-nextgen:genomics/latest:accounts",
"azure-nextgen:guestconfiguration/latest:autoManagedAccounts",
"azure-nextgen:guestconfiguration/latest:autoManagedVmConfigurationProfiles",
"azure-nextgen:hanaonazure/latest:hanaInstances",
"azure-nextgen:hanaonazure/latest:sapMonitors",
"azure-nextgen:hardwaresecuritymodules/latest:dedicatedHSMs",
"azure-nextgen:hdinsight/latest:clusters",
"azure-nextgen:healthcareapis/latest:services",
"azure-nextgen:hybridcompute/latest:machines",
"azure-nextgen:hybridcompute/latest:machines/extensions",
"azure-nextgen:hybriddata/latest:dataManagers",
"azure-nextgen:hybridnetwork/latest:devices",
"azure-nextgen:hybridnetwork/latest:virtualnetworkfunctions",
"azure-nextgen:hydra/latest:components",
"azure-nextgen:hydra/latest:networkScopes",
"azure-nextgen:importexport/latest:jobs",
"azure-nextgen:insights/latest:actionGroups",
"azure-nextgen:insights/latest:activityLogAlerts",
"azure-nextgen:insights/latest:alertrules",
"azure-nextgen:insights/latest:autoscalesettings",
"azure-nextgen:insights/latest:components",
"azure-nextgen:insights/latest:guestDiagnosticSettings",
"azure-nextgen:insights/latest:guestDiagnosticSettingsAssociation",
"azure-nextgen:insights/latest:logprofiles",
"azure-nextgen:insights/latest:metricAlerts",
"azure-nextgen:insights/latest:privateLinkScopes",
"azure-nextgen:insights/latest:queryPacks",
"azure-nextgen:insights/latest:scheduledQueryRules",
"azure-nextgen:insights/latest:webtests",
"azure-nextgen:insights/latest:workbooks",
"azure-nextgen:insights/latest:workbooktemplates",
"azure-nextgen:iotcentral/latest:IoTApps",
"azure-nextgen:iotspaces/latest:Graph",
"azure-nextgen:keyvault/latest:hsmPools",
"azure-nextgen:keyvault/latest:managedHSMs",
"azure-nextgen:keyvault/latest:vaults",
"azure-nextgen:kubernetes/latest:connectedClusters",
"azure-nextgen:kusto/latest:clusters",
"azure-nextgen:labservices/latest:labaccounts",
"azure-nextgen:logic/latest:hostingEnvironments",
"azure-nextgen:logic/latest:integrationAccounts",
"azure-nextgen:logic/latest:integrationServiceEnvironments",
"azure-nextgen:logic/latest:isolatedEnvironments",
"azure-nextgen:logic/latest:workflows",
"azure-nextgen:machinelearning/latest:commitmentPlans",
"azure-nextgen:machinelearning/latest:webServices",
"azure-nextgen:machinelearning/latest:Workspaces",
"azure-nextgen:machinelearningservices/latest:workspaces",
"azure-nextgen:machinelearningservices/latest:workspaces/inferenceEndpoints",
"azure-nextgen:machinelearningservices/latest:workspaces/inferenceEndpoints/deployments",
"azure-nextgen:maintenance/latest:maintenanceConfigurations",
"azure-nextgen:managedidentity/latest:userAssignedIdentities",
"azure-nextgen:managednetwork/latest:managedNetworks",
"azure-nextgen:managednetwork/latest:managedNetworks/managedNetworkGroups",
"azure-nextgen:managednetwork/latest:managedNetworks/managedNetworkPeeringPolicies",
"azure-nextgen:managednetwork/latest:notification",
"azure-nextgen:maps/latest:accounts",
"azure-nextgen:maps/latest:accounts/privateAtlases",
"azure-nextgen:marketplaceapps/latest:classicDevServices",
"azure-nextgen:media/latest:mediaservices",
"azure-nextgen:media/latest:mediaservices/liveEvents",
"azure-nextgen:media/latest:mediaservices/streamingEndpoints",
"azure-nextgen:microservices4spring/latest:appClusters",
"azure-nextgen:migrate/latest:assessmentProjects",
"azure-nextgen:migrate/latest:migrateprojects",
"azure-nextgen:migrate/latest:moveCollections",
"azure-nextgen:migrate/latest:projects",
"azure-nextgen:mixedreality/latest:holographicsBroadcastAccounts",
"azure-nextgen:mixedreality/latest:objectUnderstandingAccounts",
"azure-nextgen:mixedreality/latest:remoteRenderingAccounts",
"azure-nextgen:mixedreality/latest:spatialAnchorsAccounts",
"azure-nextgen:netapp/latest:netAppAccounts",
"azure-nextgen:netapp/latest:netAppAccounts/capacityPools",
"azure-nextgen:netapp/latest:netAppAccounts/capacityPools/volumes",
"azure-nextgen:network/latest:applicationGateways",
"azure-nextgen:network/latest:applicationGatewayWebApplicationFirewallPolicies",
"azure-nextgen:network/latest:applicationSecurityGroups",
"azure-nextgen:network/latest:azureFirewalls",
"azure-nextgen:network/latest:bastionHosts",
"azure-nextgen:network/latest:connections",
"azure-nextgen:network/latest:ddosCustomPolicies",
"azure-nextgen:network/latest:ddosProtectionPlans",
"azure-nextgen:network/latest:dnszones",
"azure-nextgen:network/latest:expressRouteCircuits",
"azure-nextgen:network/latest:expressRouteCrossConnections",
"azure-nextgen:network/latest:expressRouteGateways",
"azure-nextgen:network/latest:expressRoutePorts",
"azure-nextgen:network/latest:firewallPolicies",
"azure-nextgen:network/latest:frontdoors",
"azure-nextgen:network/latest:frontdoorWebApplicationFirewallManagedRuleSets",
"azure-nextgen:network/latest:frontdoorWebApplicationFirewallPolicies",
"azure-nextgen:network/latest:ipGroups",
"azure-nextgen:network/latest:loadBalancers",
"azure-nextgen:network/latest:localNetworkGateways",
"azure-nextgen:network/latest:natGateways",
"azure-nextgen:network/latest:networkIntentPolicies",
"azure-nextgen:network/latest:networkInterfaces",
"azure-nextgen:network/latest:networkProfiles",
"azure-nextgen:network/latest:networkSecurityGroups",
"azure-nextgen:network/latest:networkWatchers",
"azure-nextgen:network/latest:networkWatchers/connectionMonitors",
"azure-nextgen:network/latest:networkWatchers/lenses",
"azure-nextgen:network/latest:networkWatchers/pingMeshes",
"azure-nextgen:network/latest:p2sVpnGateways",
"azure-nextgen:network/latest:privateDnsZones",
"azure-nextgen:network/latest:privateDnsZones/virtualNetworkLinks",
"azure-nextgen:network/latest:privateEndpoints",
"azure-nextgen:network/latest:privateLinkServices",
"azure-nextgen:network/latest:publicIPAddresses",
"azure-nextgen:network/latest:publicIPPrefixes",
"azure-nextgen:network/latest:routeFilters",
"azure-nextgen:network/latest:routeTables",
"azure-nextgen:network/latest:serviceEndpointPolicies",
"azure-nextgen:network/latest:trafficmanagerprofiles",
"azure-nextgen:network/latest:virtualHubs",
"azure-nextgen:network/latest:virtualNetworkGateways",
"azure-nextgen:network/latest:virtualNetworks",
"azure-nextgen:network/latest:virtualNetworkTaps",
"azure-nextgen:network/latest:virtualWans",
"azure-nextgen:network/latest:vpnGateways",
"azure-nextgen:network/latest:vpnSites",
"azure-nextgen:network/latest:webApplicationFirewallPolicies",
"azure-nextgen:notificationhubs/latest:namespaces",
"azure-nextgen:notificationhubs/latest:namespaces/notificationHubs",
"azure-nextgen:objectstore/latest:osNamespaces",
"azure-nextgen:offazure/latest:HyperVSites",
"azure-nextgen:offazure/latest:ImportSites",
"azure-nextgen:offazure/latest:MasterSites",
"azure-nextgen:offazure/latest:ServerSites",
"azure-nextgen:offazure/latest:VMwareSites",
"azure-nextgen:operationalinsights/latest:clusters",
"azure-nextgen:operationalinsights/latest:workspaces",
"azure-nextgen:operationsmanagement/latest:managementconfigurations",
"azure-nextgen:operationsmanagement/latest:solutions",
"azure-nextgen:operationsmanagement/latest:views",
"azure-nextgen:peering/latest:peerings",
"azure-nextgen:peering/latest:peeringServices",
"azure-nextgen:portal/latest:dashboards",
"azure-nextgen:powerbi/latest:privateLinkServicesForPowerBI",
"azure-nextgen:powerbi/latest:tenants",
"azure-nextgen:powerbi/latest:workspaceCollections",
"azure-nextgen:powerbidedicated/latest:capacities",
"azure-nextgen:projectbabylon/latest:accounts",
"azure-nextgen:providerhub/latest:rollouts",
"azure-nextgen:quantum/latest:Workspaces",
"azure-nextgen:recoveryservices/latest:vaults",
"azure-nextgen:redhatopenshift/latest:OpenShiftClusters",
"azure-nextgen:relay/latest:namespaces",
"azure-nextgen:resourcegraph/latest:queries",
"azure-nextgen:resources/latest:deployments",
"azure-nextgen:resources/latest:deploymentScripts",
"azure-nextgen:resources/latest:resourceGroups",
"azure-nextgen:resources/latest:subscriptions",
"azure-nextgen:resources/latest:templateSpecs",
"azure-nextgen:resources/latest:templateSpecs/versions",
"azure-nextgen:saas/latest:applications",
"azure-nextgen:scvmm/latest:clouds",
"azure-nextgen:scvmm/latest:VirtualMachines",
"azure-nextgen:scvmm/latest:VirtualMachineTemplates",
"azure-nextgen:scvmm/latest:VirtualNetworks",
"azure-nextgen:scvmm/latest:vmmservers",
"azure-nextgen:search/latest:searchServices",
"azure-nextgen:security/latest:automations",
"azure-nextgen:security/latest:iotSecuritySolutions",
"azure-nextgen:servicebus/latest:namespaces",
"azure-nextgen:servicefabric/latest:applications",
"azure-nextgen:servicefabric/latest:clusters",
"azure-nextgen:servicefabric/latest:containerGroups",
"azure-nextgen:servicefabric/latest:containerGroupSets",
"azure-nextgen:servicefabric/latest:edgeclusters",
"azure-nextgen:servicefabric/latest:managedclusters",
"azure-nextgen:servicefabric/latest:networks",
"azure-nextgen:servicefabric/latest:secretstores",
"azure-nextgen:servicefabric/latest:volumes",
"azure-nextgen:servicefabricmesh/latest:applications",
"azure-nextgen:servicefabricmesh/latest:containerGroups",
"azure-nextgen:servicefabricmesh/latest:gateways",
"azure-nextgen:servicefabricmesh/latest:networks",
"azure-nextgen:servicefabricmesh/latest:secrets",
"azure-nextgen:servicefabricmesh/latest:volumes",
"azure-nextgen:services/latest:rollouts",
"azure-nextgen:signalrservice/latest:SignalR",
"azure-nextgen:solutions/latest:applicationDefinitions",
"azure-nextgen:solutions/latest:applications",
"azure-nextgen:solutions/latest:jitRequests",
"azure-nextgen:sql/latest:managedInstances",
"azure-nextgen:sql/latest:managedInstances/databases",
"azure-nextgen:sql/latest:servers",
"azure-nextgen:sql/latest:servers/databases",
"azure-nextgen:sqlvirtualmachine/latest:SqlVirtualMachineGroups",
"azure-nextgen:sqlvirtualmachine/latest:SqlVirtualMachines",
"azure-nextgen:storage/latest:storageAccounts",
"azure-nextgen:storagecache/latest:caches",
"azure-nextgen:storagesync/latest:storageSyncServices",
"azure-nextgen:storagesyncdev/latest:storageSyncServices",
"azure-nextgen:storagesyncint/latest:storageSyncServices",
"azure-nextgen:storsimple/latest:managers",
"azure-nextgen:streamanalytics/latest:clusters",
"azure-nextgen:streamanalytics/latest:streamingjobs",
"azure-nextgen:synapse/latest:privateLinkHubs",
"azure-nextgen:synapse/latest:workspaces",
"azure-nextgen:synapse/latest:workspaces/bigDataPools",
"azure-nextgen:synapse/latest:workspaces/sqlDatabases",
"azure-nextgen:synapse/latest:workspaces/sqlPools",
"azure-nextgen:timeseriesinsights/latest:environments",
"azure-nextgen:timeseriesinsights/latest:environments/eventsources",
"azure-nextgen:timeseriesinsights/latest:environments/referenceDataSets",
"azure-nextgen:token/latest:stores",
"azure-nextgen:virtualmachineimages/latest:imageTemplates",
"azure-nextgen:vmware/latest:ArcZones",
"azure-nextgen:vmware/latest:ResourcePools",
"azure-nextgen:vmware/latest:VCenters",
"azure-nextgen:vmware/latest:VirtualMachines",
"azure-nextgen:vmware/latest:VirtualMachineTemplates",
"azure-nextgen:vmware/latest:VirtualNetworks",
"azure-nextgen:vmwarecloudsimple/latest:dedicatedCloudNodes",
"azure-nextgen:vmwarecloudsimple/latest:dedicatedCloudServices",
"azure-nextgen:vmwarecloudsimple/latest:virtualMachines",
"azure-nextgen:vnfmanager/latest:devices",
"azure-nextgen:vnfmanager/latest:vnfs",
"azure-nextgen:vsonline/latest:accounts",
"azure-nextgen:vsonline/latest:plans",
"azure-nextgen:web/latest:certificates",
"azure-nextgen:web/latest:connectionGateways",
"azure-nextgen:web/latest:connections",
"azure-nextgen:web/latest:customApis",
"azure-nextgen:web/latest:hostingEnvironments",
"azure-nextgen:web/latest:kubeEnvironments",
"azure-nextgen:web/latest:serverFarms",
"azure-nextgen:web/latest:sites",
"azure-nextgen:web/latest:sites/premieraddons",
"azure-nextgen:web/latest:sites/slots",
"azure-nextgen:web/latest:staticSites",
"azure-nextgen:windowsesu/latest:multipleActivationKeys",
"azure-nextgen:windowsiot/latest:DeviceServices",
"azure-nextgen:workloadbuilder/latest:workloads",
];
